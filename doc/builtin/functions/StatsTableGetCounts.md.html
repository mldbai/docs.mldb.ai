<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>MLDB Documentation</title>
<script src='/resources/js/mathjax_TeX-AMS-MML_HTMLorMML.js'></script>
<link rel='stylesheet' href='/resources/css/prism.css'>
<link rel='stylesheet' href='/resources/css/doc.css'>
<script src='/resources/js/jquery-1.11.2.min.js'></script>
<script src='/resources/js/prism.js'></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  if(window.location.origin == 'http://mldb.ai')
  { ga('create', 'UA-16909325-9', 'auto'); }
  else
  { ga('create', 'UA-16909325-10', {'cookieDomain': 'none'}); }
  ga('send', 'pageview');
</script>
</head>
<body style='margin-left: 50px; max-width: 1000px'>
<h1>Stats Table Get Counts Function</h1>

<p>Functions of this type do a lookup in a stats table trained with the <a href="/doc/builtin/procedures/StatsTableProcedure.md.html"><code>statsTable.train</code> procedure type</a> and returns 
the counts for each of the keys provided as input.</p>

<h2>Configuration</h2>

<p><p>A new function of type <code>statsTable.getCounts</code> named <code>&lt;id&gt;</code> can be created as follows:</p><pre><code class="language-python">mldb.put(&quot;/v1/functions/&quot;+&lt;id&gt;, {
    &quot;type&quot;: &quot;statsTable.getCounts&quot;,
    &quot;params&quot;: {
        "statsTableFileUrl": &lt;<a href="/doc/builtin/Url.md.html">Url</a>&gt;
    }
})</code></pre><p>with the following key-value definitions for <code>params</code>:</p><table class="params table" width='100%'><tr><th align='right'>Field, Type, Default</th><th>Description</th></tr>
<tr><td align='right'><p><strong>statsTableFileUrl</strong> <br/> <nobr><a href="/doc/builtin/Url.md.html">Url</a></nobr> <br/> <code></code></p></td><td><p>URL of the model file (with extension &#39;.st&#39;) to load. This file is created by the <a href="/doc/builtin/procedures/StatsTableProcedure.md.html"><code>statsTable.train</code> procedure type</a>.</p>
</td></tr>
</table></p>

<h2>Input and Output Values</h2>

<p>Functions of this type have a single input value named <code>keys</code> which is a row.</p>

<p>Functions of this type have a single output value named <code>counts</code> which is also a row. 
The row will contain two columns for each key, one containing the number of elements 
for the key and one containing the number of labels for that key. For example, for 
 keys in the <code>host</code> and <code>region</code> stats tables, a row of this form would be returned:</p>

<table>
<thead>
<tr>
<th>rowName</th>
<th>imp-host</th>
<th>label-host</th>
<th>imp-region</th>
<th>label-region</th>
</tr>
</thead>

<tbody>
<tr>
<td>row_1</td>
<td>25</td>
<td>1</td>
<td>50</td>
<td>0</td>
</tr>
</tbody>
</table>

<h2>See also</h2>

<ul>
<li>The <a href="/doc/builtin/procedures/StatsTableProcedure.md.html"><code>statsTable.train</code> procedure type</a> trains stats tables.</li>
<li>The <a href="/doc/builtin/procedures/StatsTableDerivedColumnsGeneratorProcedure.md.html"><code>experimental.statsTable.derivedColumnsGenerator</code> procedure type</a> can be used to generate derived columns from stats table counts.</li>
</ul>
</body>
</html>
